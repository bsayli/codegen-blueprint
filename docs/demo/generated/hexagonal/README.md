# Greeting

Greeting sample built with hexagonal architecture

---

## ‚ú® Project Summary

| Domain | Aspect | Value |
|------|--------|-------|
| üîß Tech Stack | Framework | `spring-boot` |
| | Language | `java` |
| | Build Tool | `maven` |
| | Java | `21` |
| | Spring Boot | `3.5.9` |
| üèó Architecture | Layout | `hexagonal` |
| | Guardrails | `strict` |
| | Sample Code | `basic` |

---

## üìë Table of Contents

- [Project Summary](#-project-summary)
- [Coordinates](#-coordinates)
- [Quick Start](#-quick-start)
- [Project Layout](#-project-layout)
- [Architecture Guardrails](#-architecture-guardrails)
- [Included Sample (Basic)](#-included-sample-basic)
- [Selected Dependencies](#-selected-dependencies)
- [Scope & Intent](#scope--intent)

---

## üì¶ Coordinates

| Key          | Value            |
| ------------ | ---------------- |
| `groupId`    | `io.github.blueprintplatform`     |
| `artifactId` | `greeting`  |
| `package`    | `io.github.blueprintplatform.greeting` |

---

## üöÄ Quick Start

```bash
# Build (fast feedback)
./mvnw clean package
```

```bash
# Verify architecture guardrails (recommended)
# Runs generated ArchUnit tests and fails fast on architectural violations
./mvnw verify
```

> **Why `mvn verify` matters**
>
> This project includes **generated architecture guardrails**
> that are evaluated at **build time**.
>
> Running `mvn verify` executes these guardrails and serves as
> the **proof of the architectural contract**.
>
> Any boundary violation will **fail the build immediately**.

```bash
# Run the application
./mvnw spring-boot:run
```

> **macOS / Linux note**
>
> If you get a `permission denied` error when running `./mvnw`, make the wrapper executable:
>
> ```bash
> chmod +x mvnw
> ```

> If Maven is installed globally, you may also use `mvn` instead of the wrapper.


---

## üìÅ Project Layout
```text
src
‚îú‚îÄ main
‚îÇ  ‚îú‚îÄ java/io/github/blueprintplatform/greeting
‚îÇ  ‚îÇ  ‚îú‚îÄ adapter
‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ in
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ out
‚îÇ  ‚îÇ  ‚îú‚îÄ application
‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ port
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ in
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ out
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ usecase
‚îÇ  ‚îÇ  ‚îú‚îÄ domain
‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ model
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ service
‚îÇ  ‚îÇ  ‚îî‚îÄ bootstrap
‚îÇ  ‚îî‚îÄ resources
‚îî‚îÄ test
   ‚îî‚îÄ java/io/github/blueprintplatform/greeting
```

> This project follows **Hexagonal Architecture (Ports & Adapters)**.
>
> * `domain` contains pure business rules (framework-free)
> * `application` orchestrates use cases and defines ports
>
>   * `application/port` defines inbound and outbound ports
>   * `application/usecase` contains use case implementations
> * `adapter` contains inbound/outbound implementations (REST, persistence, messaging)
> * `bootstrap` wires everything together

---
## üß© Architecture Guardrails

> **Architecture Contract Notice**
>
> Architecture guardrails are evaluated **strictly against the package structure generated by Codegen Blueprint**.
> The generated source layout is **part of the architectural contract itself**.
>
> Renaming packages, introducing new top-level families, or relocating components
> without updating the contract will be detected as **architecture drift**.
>
> **This contract is enforced by generated, build-time architecture tests.**

---

### What guardrails are (and are not)

Architecture guardrails are:

* **Generated** (not handwritten)
* **Executable** (evaluated as tests)
* **Deterministic** (same input ‚Üí same outcome)
* **Build-time only** (no runtime checks)

They are **not**:

* Documentation
* Conventions
* Runtime safety nets

Guardrails exist to make architectural boundaries **observable, enforceable, and non-bypassable**.

---

### Guardrails categories

All guardrails fall into three distinct categories:

1. **Dependency guardrails**
Enforce allowed and forbidden dependency directions between layers and components.

2. **Boundary guardrails**
Protect public boundaries (e.g. REST) from leaking internal or domain types.

3. **Schema & contract guardrails**
Ensure that the **structural contract itself remains valid** and cannot be silently bypassed.

> Schema guardrails are critical: without them, dependency rules can be accidentally disabled
> by refactoring package names or moving code outside the expected structure.

---

### Guardrails status: enabled (strict)

Strict mode treats architecture as a **non-negotiable contract**.

Any structural drift, boundary leakage, or rename-based bypass
will **fail the build deterministically**.

---

#### What strict guardrails enforce

In addition to all basic guardrails, strict mode enforces:

* Full dependency direction contracts
* Public boundary isolation
* Domain purity
* Package cycle prevention
* **Schema & rename enforcement**

---

### Hexagonal (Strict)

**Dependency & direction rules**
  * Application must not depend on adapters
  * Bootstrap is a dependency leaf

---

**Adapter isolation**
  * Inbound adapters must not depend on outbound adapters
  * Outbound adapters must not depend on inbound adapters

---

**Inbound adapter ‚Üí domain isolation**
  * Inbound adapters must not depend on domain services
  * Inbound adapters must not depend on domain outbound ports

---

**Application implementation isolation**
  * Adapters may depend only on application **ports**
  * Application implementations are forbidden dependencies

---

**Domain purity**
  * Domain may depend only on:
    * JDK types (`java.*`)
    * Other domain types

---

**Schema & rename enforcement**
  Within each detected bounded context, every class must reside under
  one of the canonical hexagonal families:
  * `adapter`
  * `application`
  * `domain`
  * `bootstrap`

This prevents silent guardrails bypass via package renaming.

---

**Package cycle prevention**
  * No cyclic dependencies between top-level packages
  * No cycles inside adapter subpackages

---

**REST boundary isolation** (when `spring-boot-starter-web` is present)
  * REST controllers must not expose domain types in:
    * return types
    * parameters
    * generic signatures
  * Inbound adapter DTOs must not depend on domain

---

#### How strict guardrails are evaluated

* Rules are generated automatically based on:
  * selected **layout**
  * selected **guardrails mode**
  * selected **dependencies**

* Guardrails run **only at build time**:

```bash
mvn verify
```

Any violation fails the build ‚Äî clearly, early, and on purpose.

---

#### Where the rules live

```text
src/test/java/io/github/blueprintplatform/greeting/architecture/archunit/
```

> These tests are generated code.
> They represent the **architecture guardrails contract** selected at generation time.
>


---

## üß™ Included Sample (Basic)

Because `--sample-code basic` was selected, the project includes a minimal
end-to-end **Greeting** slice.

The sample is intentionally isolated under a dedicated package to keep
your own application code clean and to make removal straightforward.

```text
io.github.blueprintplatform.greeting.bp.sample
```

This keeps user-owned packages clean and makes the sample removable as a single subtree.

### What this sample demonstrates

* an inbound **REST adapter**
* an application **use case** exposed via an **input port**
* domain + application models
* mapping of use case output to HTTP response DTOs

### Sample REST endpoints

Base path:

```text
/api/v1/sample/greetings
```

### Available endpoints

**GET** `/api/v1/sample/greetings/default`

Returns a default greeting.

**GET** `/api/v1/sample/greetings?name=John`

Returns a personalized greeting.

Example calls:

```bash
curl -s http://localhost:8080/api/v1/sample/greetings/default | jq
curl -s "http://localhost:8080/api/v1/sample/greetings?name=John" | jq
```

### Where to look in the code

Start here:

* **Inbound REST adapter**
  * `bp/sample/adapter/in/rest/GreetingController`

---

* **Application port (input)**
  * `bp/sample/application/port/in/GetGreetingPort`

---

* **Use case implementation**
  * `bp/sample/application/usecase/...`

---

* **Domain model + domain service**
  * `bp/sample/domain/model/...`
  * `bp/sample/domain/service/...`

You can use this sample in two ways:

* as a **teaching reference** for hexagonal boundaries
* as a **starting slice** you can copy/adapt into your own user-owned packages

---

## üìö Selected Dependencies
| Dependency | Scope |
|-----------|-------|
| `org.springframework.boot:spring-boot-starter-web` | default |

---

## Scope & Intent

This generated project intentionally focuses on **structural correctness and observable architectural guardrails**.

Delivery concerns (CI/CD, containerization, deployment strategies) are left to the consuming team and platform standards.

üèó Generated by **Blueprint Platform ‚Äî Codegen Blueprint CLI**
